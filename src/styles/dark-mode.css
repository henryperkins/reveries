/* Dark Mode Styles */
@layer base {

  /* Light mode (default) color scheme */
  :root {
    /* Base colors */
    --color-westworld-cream: #FAF6F2;
    --color-westworld-beige: #F5EDE4;
    --color-westworld-tan: #E8D5C4;
    --color-westworld-brown: #8B6F47;
    --color-westworld-dark-brown: #6B5637;
    --color-westworld-near-black: #2A2522;
    --color-westworld-black: #1A1512;
    --color-westworld-gold: #D4AF37;
    --color-westworld-dark-gold: #B8941F;
    --color-westworld-rust: #A85732;
    --color-westworld-copper: #C87543;
    --color-westworld-dark-copper: #A65E36;
    --color-westworld-white: #FFFFFF;

    /* Shadows */
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
  }

  /* Dark mode color scheme - use both class and attribute selectors */
  .dark,
  [data-theme="dark"] {
    /* Base colors - proper dark mode variants */
    --color-westworld-cream: #1A1512;
    --color-westworld-beige: #2A2522;
    --color-westworld-tan: #3A3532;
    --color-westworld-brown: #D4AF37;
    --color-westworld-dark-brown: #E4BF47;
    --color-westworld-near-black: #F5EDE4;
    --color-westworld-black: #FAF6F2;
    --color-westworld-gold: #F4CF57;
    --color-westworld-dark-gold: #E4BF47;
    --color-westworld-rust: #E89353;
    --color-westworld-copper: #F4A460;
    --color-westworld-dark-copper: #E89353;
    --color-westworld-white: #0A0806;

    /* Adjusted shadows for dark mode */
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.5);
    --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.6);
  }

  /* Automatic dark mode based on system preference */
  @media (prefers-color-scheme: dark) {
    :root:not([data-theme="light"]) {
      /* Base colors - properly inverted for dark mode */
      --color-westworld-cream: #1A1512;
      --color-westworld-beige: #2A2522;
      --color-westworld-tan: #3A3532;
      --color-westworld-brown: #D4AF37;
      --color-westworld-dark-brown: #E4BF47;
      --color-westworld-near-black: #F5EDE4;
      --color-westworld-black: #FAF6F2;
      --color-westworld-gold: #F4CF57;
      --color-westworld-dark-gold: #E4BF47;
      --color-westworld-rust: #E89353;
      --color-westworld-copper: #F4A460;
      --color-westworld-dark-copper: #E89353;
      --color-westworld-white: #0A0806;

      --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
      --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.5);
      --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.6);
    }
  }
}

@layer components {

  /* Dark mode specific component adjustments - use both selectors */
  .dark,
  [data-theme="dark"] {

    /* Body background */
    body {
      @apply bg-westworld-cream text-westworld-near-black;
    }

    /* Adjust card backgrounds */
    .card {
      @apply bg-westworld-beige border-westworld-tan/30;
      @apply shadow-md;
    }

    /* Input adjustments */
    .input,
    .textarea,
    .select {
      @apply bg-westworld-tan/20 border-westworld-tan/50;
      @apply text-westworld-near-black placeholder-westworld-copper/50;
      @apply focus:border-westworld-gold focus:ring-westworld-gold/20;
    }

    /* Button adjustments */
    .btn-primary {
      @apply bg-westworld-gold text-westworld-cream;
      @apply hover:bg-westworld-rust;
      @apply shadow-md hover:shadow-lg;
    }

    .btn-secondary {
      @apply bg-westworld-tan/30 border-westworld-copper/50 text-westworld-near-black;
      @apply hover:bg-westworld-tan/50 hover:border-westworld-copper;
    }

    .btn-ghost {
      @apply text-westworld-near-black;
      @apply hover:bg-westworld-tan/20;
    }

    /* Code blocks */
    .code-block,
    pre,
    code {
      @apply bg-westworld-black/10 border-westworld-tan/30;
      @apply text-westworld-near-black;
    }

    /* Links */
    a {
      @apply text-westworld-gold hover:text-westworld-copper;
    }

    /* Skeleton loading */
    .skeleton {
      background: linear-gradient(90deg,
          var(--color-westworld-tan) 0%,
          var(--color-westworld-beige) 20%,
          var(--color-westworld-tan) 40%,
          var(--color-westworld-tan) 100%);
    }

    /* Scrollbar */
    ::-webkit-scrollbar {
      @apply w-2 h-2;
    }

    ::-webkit-scrollbar-track {
      @apply bg-westworld-beige;
    }

    ::-webkit-scrollbar-thumb {
      @apply bg-westworld-gold/30 rounded-full;
      @apply hover:bg-westworld-gold/50;
    }

    /* Tooltips */
    .tooltip-content {
      @apply bg-westworld-near-black text-westworld-cream;
      @apply border border-westworld-tan/30;
      @apply shadow-lg;
    }

    /* Focus states */
    :focus-visible {
      outline-color: var(--color-westworld-gold);
      outline-offset: 2px;
    }

    /* Selection */
    ::selection {
      @apply bg-westworld-gold/30 text-westworld-black;
    }

    /* Dividers */
    hr {
      @apply border-westworld-tan/30;
    }

    /* Tables */
    table {
      @apply border-westworld-tan/30;
    }

    th {
      @apply bg-westworld-tan/20 text-westworld-near-black;
    }

    td {
      @apply border-westworld-tan/30;
    }

    tr:hover {
      @apply bg-westworld-tan/10;
    }

    /* Theme toggle focus ring offset */
    .theme-toggle {
      @apply focus:ring-offset-westworld-beige;
    }
  }

  /* Theme toggle button */
  .theme-toggle {
    @apply relative w-14 h-7 rounded-full;
    @apply bg-westworld-tan transition-all duration-300;
    @apply cursor-pointer focus:outline-none focus:ring-2 focus:ring-westworld-gold focus:ring-offset-2;
    @apply focus:ring-offset-westworld-cream;
  }

  .theme-toggle-thumb {
    @apply absolute top-1 left-1 w-5 h-5 rounded-full;
    @apply bg-westworld-cream transition-all duration-300;
    @apply flex items-center justify-center shadow-md;
  }

  .theme-toggle-thumb svg {
    @apply w-3 h-3 text-westworld-near-black;
  }

  .dark .theme-toggle,
  [data-theme="dark"] .theme-toggle {
    @apply bg-westworld-gold/30;
  }

  .dark .theme-toggle-thumb,
  [data-theme="dark"] .theme-toggle-thumb {
    @apply translate-x-7 bg-westworld-gold;
  }

  .dark .theme-toggle-thumb svg,
  [data-theme="dark"] .theme-toggle-thumb svg {
    @apply text-westworld-cream;
  }

  /* Smooth theme transition */
  html.theme-transition,
  html.theme-transition *,
  html.theme-transition *:before,
  html.theme-transition *:after {
    transition-property: color, background-color, border-color, text-decoration-color, fill, stroke !important;
    transition-duration: 300ms !important;
    transition-timing-function: ease-in-out !important;
  }

  /* Prevent transition on page load */
  html:not(.theme-transition) * {
    transition: none !important;
  }
}

@layer utilities {

  /* Dark mode utilities */
  .dark-invert {
    @apply invert hue-rotate-180;
  }

  .dark .dark-invert,
  [data-theme="dark"] .dark-invert {
    @apply invert-0 hue-rotate-0;
  }

  .dark-dim {
    @apply opacity-80;
  }

  .dark .dark-dim,
  [data-theme="dark"] .dark-dim {
    @apply opacity-100;
  }

  .dark-brighten {
    @apply brightness-100;
  }

  .dark .dark-brighten,
  [data-theme="dark"] .dark-brighten {
    @apply brightness-110;
  }

  /* Accessibility helpers */
  .high-contrast {
    @apply contrast-125;
  }

  .dark .high-contrast,
  [data-theme="dark"] .high-contrast {
    @apply contrast-150;
  }
}
