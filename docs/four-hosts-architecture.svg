<svg viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
  <!-- Title -->
  <text x="600" y="30" text-anchor="middle" font-size="24" font-weight="bold">Four Hosts Research Architecture</text>
  
  <!-- User Query Input -->
  <rect x="500" y="60" width="200" height="40" fill="#e5e7eb" stroke="#6b7280" stroke-width="2" rx="5"/>
  <text x="600" y="85" text-anchor="middle" font-size="14">User Query</text>
  
  <!-- Arrow to Classifier -->
  <path d="M 600 100 L 600 140" stroke="#6b7280" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Paradigm Classifier -->
  <rect x="450" y="140" width="300" height="60" fill="#ddd6fe" stroke="#7c3aed" stroke-width="2" rx="5"/>
  <text x="600" y="165" text-anchor="middle" font-size="14" font-weight="bold">Paradigm Classifier</text>
  <text x="600" y="185" text-anchor="middle" font-size="12">Probability Distribution</text>
  
  <!-- Paradigm Probabilities -->
  <g transform="translate(300, 230)">
    <rect x="0" y="0" width="600" height="30" fill="#f3f4f6" stroke="#6b7280" rx="5"/>
    <rect x="0" y="0" width="150" height="30" fill="#dc2626" opacity="0.6"/>
    <rect x="150" y="0" width="120" height="30" fill="#f59e0b" opacity="0.6"/>
    <rect x="270" y="0" width="180" height="30" fill="#3b82f6" opacity="0.6"/>
    <rect x="450" y="0" width="150" height="30" fill="#10b981" opacity="0.6"/>
    <text x="75" y="20" text-anchor="middle" font-size="12" fill="white">Dolores 25%</text>
    <text x="210" y="20" text-anchor="middle" font-size="12" fill="white">Teddy 20%</text>
    <text x="360" y="20" text-anchor="middle" font-size="12" fill="white">Bernard 30%</text>
    <text x="525" y="20" text-anchor="middle" font-size="12" fill="white">Maeve 25%</text>
  </g>
  
  <!-- Arrow to Context Engineering -->
  <path d="M 600 270 L 600 310" stroke="#6b7280" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Context Engineering -->
  <rect x="400" y="310" width="400" height="80" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" rx="5"/>
  <text x="600" y="335" text-anchor="middle" font-size="14" font-weight="bold">Context Engineering Service</text>
  <text x="600" y="355" text-anchor="middle" font-size="12">Phase: Analysis | Density: 85%</text>
  <text x="600" y="375" text-anchor="middle" font-size="12">Layer Sequence: Select → Write → Compress → Isolate</text>
  
  <!-- Context Layers -->
  <g transform="translate(150, 420)">
    <!-- Write Layer -->
    <rect x="0" y="0" width="200" height="120" fill="#e0e7ff" stroke="#6366f1" stroke-width="2" rx="5"/>
    <text x="100" y="25" text-anchor="middle" font-size="14" font-weight="bold">📝 Write Layer</text>
    <text x="100" y="50" text-anchor="middle" font-size="11">• Scratchpad (10min)</text>
    <text x="100" y="70" text-anchor="middle" font-size="11">• Memory Store (24h)</text>
    <text x="100" y="90" text-anchor="middle" font-size="11">• Paradigm Namespaced</text>
    
    <!-- Select Layer -->
    <rect x="250" y="0" width="200" height="120" fill="#dcfce7" stroke="#22c55e" stroke-width="2" rx="5"/>
    <text x="350" y="25" text-anchor="middle" font-size="14" font-weight="bold">🔍 Select Layer</text>
    <text x="350" y="50" text-anchor="middle" font-size="11">• Source Ranking</text>
    <text x="350" y="70" text-anchor="middle" font-size="11">• Tool Selection</text>
    <text x="350" y="90" text-anchor="middle" font-size="11">• Paradigm Criteria</text>
    
    <!-- Compress Layer -->
    <rect x="500" y="0" width="200" height="120" fill="#fee2e2" stroke="#ef4444" stroke-width="2" rx="5"/>
    <text x="600" y="25" text-anchor="middle" font-size="14" font-weight="bold">🗜️ Compress Layer</text>
    <text x="600" y="50" text-anchor="middle" font-size="11">• Token Reduction</text>
    <text x="600" y="70" text-anchor="middle" font-size="11">• Keyword Preservation</text>
    <text x="600" y="90" text-anchor="middle" font-size="11">• Format by Paradigm</text>
    
    <!-- Isolate Layer -->
    <rect x="750" y="0" width="200" height="120" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" rx="5"/>
    <text x="850" y="25" text-anchor="middle" font-size="14" font-weight="bold">🚪 Isolate Layer</text>
    <text x="850" y="50" text-anchor="middle" font-size="11">• Async Sub-tasks</text>
    <text x="850" y="70" text-anchor="middle" font-size="11">• Focused Analysis</text>
    <text x="850" y="90" text-anchor="middle" font-size="11">• Parallel Execution</text>
  </g>
  
  <!-- Arrows from layers to research -->
  <path d="M 600 540 L 600 580" stroke="#6b7280" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Paradigm Research Execution -->
  <rect x="350" y="580" width="500" height="100" fill="#e5e7eb" stroke="#6b7280" stroke-width="2" rx="5"/>
  <text x="600" y="605" text-anchor="middle" font-size="14" font-weight="bold">Bernard Research Execution</text>
  <text x="600" y="630" text-anchor="middle" font-size="12">• Academic source prioritization</text>
  <text x="600" y="650" text-anchor="middle" font-size="12">• Pattern analysis & frameworks</text>
  <text x="600" y="670" text-anchor="middle" font-size="12">• Peer review evaluation</text>
  
  <!-- Self-Healing -->
  <g transform="translate(870, 580)">
    <rect x="0" y="0" width="180" height="100" fill="#fce7f3" stroke="#ec4899" stroke-width="2" rx="5"/>
    <text x="90" y="25" text-anchor="middle" font-size="14" font-weight="bold">Self-Healing</text>
    <text x="90" y="50" text-anchor="middle" font-size="11">Confidence: 35%</text>
    <text x="90" y="70" text-anchor="middle" font-size="11">Strategy: Bernard</text>
    <text x="90" y="90" text-anchor="middle" font-size="11">Deep Analysis</text>
  </g>
  
  <!-- Cache -->
  <g transform="translate(50, 580)">
    <rect x="0" y="0" width="180" height="100" fill="#ddd6fe" stroke="#7c3aed" stroke-width="2" rx="5"/>
    <text x="90" y="25" text-anchor="middle" font-size="14" font-weight="bold">Paradigm Cache</text>
    <text x="90" y="50" text-anchor="middle" font-size="11">Key: bernard:query</text>
    <text x="90" y="70" text-anchor="middle" font-size="11">TTL: 30 minutes</text>
    <text x="90" y="90" text-anchor="middle" font-size="11">Hit Rate: 42%</text>
  </g>
  
  <!-- Final Result -->
  <path d="M 600 680 L 600 720" stroke="#6b7280" stroke-width="2" marker-end="url(#arrowhead)"/>
  <rect x="400" y="720" width="400" height="60" fill="#d1fae5" stroke="#10b981" stroke-width="2" rx="5"/>
  <text x="600" y="745" text-anchor="middle" font-size="14" font-weight="bold">Enhanced Research Results</text>
  <text x="600" y="765" text-anchor="middle" font-size="12">Paradigm: Bernard | Confidence: 90% | Sources: 12</text>
  
  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#6b7280"/>
    </marker>
  </defs>
</svg>